[gd_scene load_steps=31 format=2]

[ext_resource path="res://sprites/screens/main/backgrounds/background.png" type="Texture" id=1]
[ext_resource path="res://scenes/players/ninja.tscn" type="PackedScene" id=2]
[ext_resource path="res://scenes/support/items_spawner.tscn" type="PackedScene" id=3]
[ext_resource path="res://scripts/screens/main/label_score.gd" type="Script" id=4]
[ext_resource path="res://scripts/screens/main/draw_lifes.gd" type="Script" id=5]
[ext_resource path="res://sprites/screens/main/gui/hud_life.png" type="Texture" id=6]
[ext_resource path="res://scripts/support/camera.gd" type="Script" id=7]
[ext_resource path="res://animations/screens/main/dia_noite.anim" type="Animation" id=8]
[ext_resource path="res://scripts/screens/main/main.gd" type="Script" id=9]
[ext_resource path="res://sprites/screens/start_menu/buttons/btn_play.png" type="Texture" id=10]
[ext_resource path="res://sprites/screens/main/buttons/arrowRight.png" type="Texture" id=11]
[ext_resource path="res://sprites/screens/main/buttons/btn_pause.png" type="Texture" id=12]
[ext_resource path="res://sprites/screens/main/buttons/arrowLeft.png" type="Texture" id=13]
[ext_resource path="res://scripts/screens/game_over/game_over_label.gd" type="Script" id=14]
[ext_resource path="res://sprites/screens/game_over/buttons/btn_restart.png" type="Texture" id=15]
[ext_resource path="res://animations/screens/main/level_up_label.anim" type="Animation" id=17]
[ext_resource path="res://sounds/players/ninja/level_up.wav" type="AudioStream" id=18]
[ext_resource path="res://scripts/screens/main/label_level.gd" type="Script" id=19]
[ext_resource path="res://fonts/font_gui.ttf" type="DynamicFontData" id=20]

[sub_resource type="GDScript" id=1]
resource_name = "dia_noite_anim"
script/source = "extends AnimationPlayer

func _on_anim_ready():
	play(\"dia_noite\")
"

[sub_resource type="DynamicFont" id=2]
use_filter = true
font_data = ExtResource( 20 )

[sub_resource type="DynamicFont" id=3]
use_filter = true
font_data = ExtResource( 20 )

[sub_resource type="GDScript" id=4]
script/source = "extends TouchScreenButton

func restart():
	print(\"RESTART\")
	get_tree().paused = false
	hide()
	get_parent().get_node(\"btn_pause\").show()
	get_parent().get_node(\"game_over_label\").hide()
	get_parent().get_parent().get_node(\"player\").set_process(true)
"

[sub_resource type="GDScript" id=5]
script/source = "extends TouchScreenButton

func play():
	get_tree().paused = false
	hide()
	get_parent().get_node(\"btn_restart\").hide()
	get_parent().get_node(\"btn_pause\").show()


"

[sub_resource type="GDScript" id=6]
script/source = "extends TouchScreenButton

func pause():
	get_tree().paused = true
	get_parent().get_node(\"btn_play\").show()
	get_parent().get_node(\"btn_restart\").hide()
	hide()

"

[sub_resource type="RectangleShape2D" id=7]
extents = Vector2( 250, 240 )

[sub_resource type="RectangleShape2D" id=8]
extents = Vector2( 250, 240 )

[sub_resource type="DynamicFont" id=9]
size = 100
font_data = ExtResource( 20 )

[sub_resource type="DynamicFont" id=10]
size = 15
font_data = ExtResource( 20 )

[sub_resource type="GDScript" id=11]
script/source = "extends Label

func level_up():
	if game.level > 1:
		text = \"LEVEL \" + str(game.level)
		get_node(\"anim\").play(\"level_up_label\")

func _ready():
	game.connect(\"level_changed\",self,\"level_up\")
"

[node name="main" type="Node2D"]
pause_mode = 2
script = ExtResource( 9 )

[node name="bg" type="Sprite" parent="."]
pause_mode = 1
position = Vector2( 320, 240 )
texture = ExtResource( 1 )

[node name="anim" type="AnimationPlayer" parent="bg"]
pause_mode = 1
anims/dia_noite = ExtResource( 8 )
script = SubResource( 1 )

[node name="player" parent="." instance=ExtResource( 2 )]
pause_mode = 1
position = Vector2( 289.867, 417.011 )

[node name="items_spawner" parent="." instance=ExtResource( 3 )]
pause_mode = 1

[node name="camera" type="Camera2D" parent="."]
pause_mode = 2
anchor_mode = 0
current = true
script = ExtResource( 7 )

[node name="gui" type="CanvasLayer" parent="."]
pause_mode = 2
layer = 15

[node name="HUD" type="CanvasLayer" parent="gui"]
pause_mode = 1

[node name="score_label" type="Label" parent="gui/HUD"]
pause_mode = 1
margin_left = 380.0
margin_top = 3.0
margin_right = 637.0
margin_bottom = 31.0
custom_fonts/font = SubResource( 2 )
custom_colors/font_color = Color( 1, 1, 1, 1 )
text = "0"
align = 2
script = ExtResource( 4 )
__meta__ = {
"_edit_use_anchors_": false
}

[node name="level_label" type="Label" parent="gui/HUD"]
pause_mode = 1
margin_left = 120.0
margin_top = 3.0
margin_right = 360.0
margin_bottom = 33.0
custom_fonts/font = SubResource( 3 )
custom_colors/font_color = Color( 1, 1, 1, 1 )
text = "level 1"
align = 2
script = ExtResource( 19 )
__meta__ = {
"_edit_use_anchors_": false
}

[node name="lifes" type="Node2D" parent="gui/HUD"]
pause_mode = 1
script = ExtResource( 5 )
item_life = ExtResource( 6 )

[node name="btn_restart" type="TouchScreenButton" parent="gui"]
pause_mode = 2
visible = false
position = Vector2( 272.45, 168.179 )
z_index = 1
normal = ExtResource( 15 )
script = SubResource( 4 )

[node name="btn_play" type="TouchScreenButton" parent="gui"]
pause_mode = 2
position = Vector2( 273.103, 166.12 )
z_index = 1
normal = ExtResource( 10 )
script = SubResource( 5 )

[node name="btn_pause" type="TouchScreenButton" parent="gui"]
pause_mode = 2
position = Vector2( 602.494, 21.2455 )
normal = ExtResource( 12 )
script = SubResource( 6 )

[node name="touch_btn_left" type="TouchScreenButton" parent="gui"]
pause_mode = 1
position = Vector2( 24.7417, 215.864 )
normal = ExtResource( 13 )
shape = SubResource( 7 )
action = "left"
visibility_mode = 1

[node name="touch_btn_right" type="TouchScreenButton" parent="gui"]
pause_mode = 1
position = Vector2( 566.649, 216.859 )
normal = ExtResource( 11 )
shape = SubResource( 8 )
action = "right"
visibility_mode = 1

[node name="game_over_label" type="Label" parent="gui"]
pause_mode = 1
visible = false
margin_left = 50.3455
margin_top = 62.8768
margin_right = 580.345
margin_bottom = 380.877
custom_fonts/font = SubResource( 9 )
custom_colors/font_color = Color( 1, 0, 0, 1 )
custom_constants/line_spacing = 70
text = "GAME 
OVER"
align = 1
valign = 1
script = ExtResource( 14 )
__meta__ = {
"_edit_use_anchors_": false
}

[node name="level_up_label" type="Label" parent="gui"]
pause_mode = 1
margin_top = 5.0
margin_right = 640.0
margin_bottom = 485.0
grow_horizontal = 2
grow_vertical = 2
rect_pivot_offset = Vector2( 320, 240 )
custom_fonts/font = SubResource( 10 )
custom_colors/font_color = Color( 0.968627, 0.996078, 0.00392157, 1 )
align = 1
valign = 1
script = SubResource( 11 )
__meta__ = {
"_edit_use_anchors_": false
}

[node name="anim" type="AnimationPlayer" parent="gui/level_up_label"]
anims/level_up_label = ExtResource( 17 )

[node name="sound" type="AudioStreamPlayer" parent="gui/level_up_label"]
stream = ExtResource( 18 )
volume_db = -25.0
mix_target = 1
[connection signal="ready" from="bg/anim" to="bg/anim" method="_on_anim_ready"]
[connection signal="pressed" from="gui/btn_restart" to="." method="_on_btn_restart_pressed"]
[connection signal="pressed" from="gui/btn_play" to="." method="_on_btn_play_pressed"]
[connection signal="pressed" from="gui/btn_pause" to="." method="_on_btn_pause_pressed"]
